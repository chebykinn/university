---
group: P42111, P42101
department:
number: 4
subject: Параллельные вычисления
author:
    - Айтуганов Д. А.
    - Чебыкин И. Б.
inspector:
    - Балакшин П. В.
---

# Цель работы

1. В программе, полученной в результате выполнения ЛР-3, так изменить этап
   Generate, чтобы генерируемый набор случайных чисел не зависел от количества
   потоков, выполняющих программу. Например, на каждой итерации i перед вызовом
   rand_r можно вызывать функцию srand(f(i)), где f – произвольно выбранная
   функция. Можно придумать и использовать любой другой способ.

2. Заменить вызовы функции gettimeofday на omp_get_wtime.

3. Распараллелить вычисления на этапе Sort, для чего выполнить сор- тировку в
   два этапа: • Отсортировать первую и вторую половину массива в двух
   независимых нитях (можно использовать OpenMP-директиву ”parallel sections”);
   • Объединить отсортированные половины в единый массив.

4. Написать функцию, которая один раз в секунду выводит в консоль сообщение о
   текущем проценте завершения работы программы.  Указанную функцию необходимо
   запустить в отдельном потоке, параллельно работающем с основным
   вычислительным циклом.

5. Обеспечить прямую совместимость (forward compatibility) напи- санной
   параллельной программы. Для этого все вызываемые функ- ции вида «omp_*»
   можно условно переопределить в препроцессор- ных директивах, например, так:

6. Провести эксперименты, варьируя N от min( N 2 x , N 1 ) до N 2 , где
   значения N 1 и N 2 взять из ЛР-1, а N x – это такое значение N , 81при
   котором накладные расходы на распараллеливание превыша- ют выигрыш от
   распараллеливания.

# Конфигурация

## Процессор

```
CPU(s):                          16
Thread(s) per core:              1
Core(s) per socket:              8
Socket(s):                       1
NUMA node(s):                    1
Vendor ID:                       AuthenticAMD
Model name:                      AMD Ryzen 7 1700 Eight-Core Processor
CPU MHz:                         2645.861
CPU max MHz:                     3000.0000
CPU min MHz:                     1550.0000
```

RAM: 32 GB

## Компиляторы

```
gcc (GCC) 9.1.0
```

# Исходный код

\begin{footnotesize}
\verbatiminput{../src/main.c}
\end{footnotesize}

# Результаты

N       seq(N)   p(N)
--      ------   ---------
14      25       18.364857
15      30       19.751233
16      177      17.995902
17      177      27.695776
18      2401     22.627936
19      2393     20.316079
20      21513    21.677666
--      ------   ---------

Доверительный интервал:

(6.1357968000000005, 5.374573883629832, 6.897019716370169)

# Выводы

После выполнения лабораторной работы можно сказать, что распараллеливание
сортировки сильно ускорило работу программы.
